<?php
	$member = new Member();
	$memberData = $member->getOneMemberByNo($_SESSION['user']['memNo']);
/*
	$school = new School();
	$school_data = $school->getAll();
	
	$major = new Major();
	$major_data = $major->getAll();

	foreach($major_data as $k => $v){
		$major_combine[$v['schNo']][] = $v['majName'];
	}
*/
?>
<!-- page wapper-->
<style>
	.button_left {
		display: inline-block;
		text-decoration: none;
		color: #fff;
		font-weight: bold;
		background-color: #01C5E0;
		padding: 20px 70px;
		font-size: 24px;
		border: 1px solid #ff89b3;
		background-image: linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -o-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -moz-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -webkit-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -ms-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
	 
		background-image: -webkit-gradient(
			linear,
			left bottom,
			left top,
			color-stop(0, #ff89b3),
			color-stop(1, #ff89b3)
		);
	}
	
	.button_right {
		display: inline-block;
		text-decoration: none;
		color: #fff;
		font-weight: bold;
		background-color: #01C5E0;
		padding: 20px 70px;
		font-size: 24px;
		border: 1px solid #7cd5e8;
		background-image: linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -o-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -moz-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -webkit-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
		background-image: -ms-linear-gradient(bottom, rgb(73,132,180) 0%, rgb(97,155,203) 100%);
	 
		background-image: -webkit-gradient(
			linear,
			left bottom,
			left top,
			color-stop(0, #7cd5e8),
			color-stop(1, #7cd5e8)
		);
	}
</style>
<div class="columns-container">
    <div class="container" id="columns">
        <!-- breadcrumb -->
        <div class="breadcrumb clearfix">
            <a class="home" href="#" title="Return to Home">Home</a>
            <span class="navigation-pipe">&nbsp;</span>
            <span class="navigation_page">會員中心</span>
        </div>
        <!-- ./breadcrumb -->
        <!-- page heading-->
        <h2 class="page-heading">
            <span class="page-heading-title2">會員資料確認</span>
        </h2>
        <!-- ../page heading-->
        <div class="page-content checkout-page">
            <h3 class="checkout-sep" style="color:red;">親愛的用戶您好，樂分期網站為實名註冊 ; 為了提供您更多更棒的分期服務，需要您花幾秒完成您的個人資料，謝謝 !!</h3>
            <div class="box-border">
                <ul>
				<form id="member_edit">
                    <div class="col-sm-12">
					
                        <label for="first_name" class="required">身分別<span style="color:red">*</span> :</label>
                    </div>    
					<div class="col-sm-6" style="text-align: center;">
						<a href="#"><span class="button_left stu" >學生</span></a>
					</div>
					
					<div class="col-sm-6" style="text-align: center;">
						<a href="#"><span class="button_right emy">非學生</span></a>
                    </div>
					
					
					<!--<div class="col-sm-6">
                        <label for="first_name" class="required">請輸入中文姓名<span style="color:red">*</span> :</label>
                        <input type="text" class="input form-control" name="memName" id="first_name" value=<?=$memberData[0]['memName']?> >
						
                    </div>
					
					<div class="col-sm-6 student">
                        <label for="first_name" class="required">學校<span style="color:red">*</span> :</label>
                        <select class="input form-control school" name="school">
                            <option value="">請選擇</option>
							<?php foreach($school_data as $key => $value){ ?>
								<option value="<?=$value['schNo']?>"><?=$value['schName']?></option>
							<? } ?>
                        </select>
						
						<label for="first_name" class="required">系別<span style="color:red">*</span> :</label><br>
                        <?php foreach($major_combine as $key => $value){ ?>
						<select class="input form-control department" name="department[]" id="shool_<?=$key?>">
                            <option value="">請選擇</option>
							<?php foreach($value as $k => $v){ ?>
									<option value="<?=$v?>"><?=$v?></option>
							<?php } ?>								
                        </select>
						<?php } ?>
						
						<label for="first_name" class="required">年級<span style="color:red">*</span> :</label>
                        <input type="text" class="input form-control" name="classyear" id="first_name">
                    </div>
					
					<div class="col-sm-6 employee">
                        <label for="first_name" class="required">公司名稱<span style="color:red">*</span> :</label>
                        <input type="text" class="input form-control" name="memCompanyName" >
						
						<label for="first_name" class="required" >年資<span style="color:red">*</span> :</label>
						<select name="memYearWorked" class="input form-control">
							<option value="">請選擇</option>
							<option value="半年以下">半年以下</option>
							<option value="半年到一年">半年到一年</option>
							<option value="一年">一年</option>
							<option value="兩年">兩年</option>
							<option value="三年">三年</option>
							<option value="三年以上">三年以上</option>
						</select>
						
						<label for="first_name" class="required">月薪<span style="color:red">*</span> :</label>
                        <input type="text" class="input form-control" name="memSalary" >
						
						<label for="first_name" class="required">公司電話<span style="color:red">*</span> :</label>
                        <input type="text" class="input form-control" name="memCompanyPhone" >
						
						<label for="first_name" class="required">公司分機</label>
                        <input type="text" class="input form-control" name="memExnumber" >
                    </div>-->
                        
                </form>
                </ul>
            </div>
                
        </div>
    </div>
</div>
<!-- ./page wapper-->
<script>
	$(".employee").hide();
	$(".student").hide();
	$(".department").hide();
	$(".memclass").change(function(){
		var memclass_val = $(this).val();
		if(memclass_val == '0'){
			$(".employee").hide();
			$(".student").show();
		}else{
			$(".student").hide();
			$(".employee").show();
		}
	})
	
	$(".stu").click(function(){
		$.ajax({
			url: 'php/member_edit_information.php',
			data: 'item=0',
			type:"GET",
			dataType:'text',
			success: function(msg){
				if(msg){
					alert('編輯完成!');
					location.href="index.php";
				}else{
					alert(msg);
				}
			},

			error:function(xhr, ajaxOptions, thrownError){ 
				alert(xhr.status); 
				alert(thrownError);
			}
		});
	})

	$(".emy").click(function(){
		$.ajax({
			url: 'php/member_edit_information.php',
			data: 'item=4',
			type:"GET",
			dataType:'text',
			success: function(msg){
			    if (msg==0 || msg==1) {
			        if (msg == 0) {			         
			            location.href = 'index.php?item=member_center&action=member_idnum';
			        }
			        else {
			            alert('編輯完成!');
			            location.href = "index.php";
			        }
				}else{
					alert(msg);
				}
			},

			error:function(xhr, ajaxOptions, thrownError){ 
				alert(xhr.status); 
				alert(thrownError);
			}
		});
	})
	
	$("#finish").click(function(){
		if($(".memclass").val() != ''){
			if($("input[name=memName]").val() != ''){
				$.ajax({
					url: 'php/member_edit_information.php',
					data: $('#member_edit').serialize(),
					type:"POST",
					dataType:'text',
					success: function(msg){
						if(msg){
							alert('編輯完成!');
							location.href="index.php";
						}else{
							alert(msg);
						}
					},

					error:function(xhr, ajaxOptions, thrownError){ 
							alert(xhr.status); 
							alert(thrownError);
					}
				});
			}else{
				alert('姓名填寫有誤');
			}
		}else{
			alert("請選擇身份");
		}
	})
	
	$(".school").change(function(){
		var school = $(this).val();
		$(".department").hide();
		$("#shool_"+school).show();
	})
	
	
	
	
	
	
</script>